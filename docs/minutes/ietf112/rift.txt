**Session Date/Time:** 08 Nov 2021 14:30

# rift

## Summary

The rift working group meeting provided updates on the status of various drafts, including the RIFT Base Specification, Applicability Statement, and YANG Model, all progressing towards IESG review or Working Group Last Call. A significant update was presented for the Auto-EVPN draft, detailing new features for Data Center Interconnect (DCI) gateway functionality, enhanced Route Reflector (RR) election, increased collision-free scale, and an added operational section. The session concluded with a teaser for upcoming work on "Flood Reflection," a novel approach to scaling flat single-area IGPs using automatic derivation.

## Key Discussion Points

*   **Working Group Status Updates:**
    *   **RIFT Base Specification**: Waiting for IESG review; an update from Alvaro promised review by year-end.
    *   **Applicability Statement**: Nearly ready with good reviews and APR statements; will be handled together with the Base Spec for IESG review.
    *   **YANG Draft**: Addressed comments and is ready for Working Group Last Call (WGLC) soon.
    *   **KV Registry Draft**: Authors are considering potential changes based on upcoming developments and readiness for WGLC.
    *   **Auto-EVPN Draft**: Showing good progress, with implementation planning underway.
    *   **Multi-segment Sharding**: Authors are still working on refreshing the draft, awaiting deployments and further requirement understanding.
    *   **Charter**: The working group plans to re-charter next year after the Base Specification and Applicability Statement have passed IESG review.

*   **Auto-EVPN Draft Update:**
    *   The draft has been adopted by the working group.
    *   **Data Center Interconnect (DCI) Gateway Functionality**: Foundational components for DCI variable derivation have been added, allowing top-of-fabric Route Reflectors (RRs) to act as DCI gateways.
    *   **Route Reflector Election**: The election schema has been altered to prefer nodes advertising a new DCI bit in their node-ID. This applies to both single-plane (highest/lowest SID with DCI bit) and multi-plane (distributed across planes based on Plane ID and DCI bit) fabrics, enhancing redundancy.
    *   **Collision-Free Scale**: The draft now supports increased scale, moving from 3 fabrics, 3 EVIs, and 15 VLANs to 6 fabrics, 7 EVIs, and 30 VLANs, with potential for further expansion.
    *   **Operational Section**: A new operational section was added, including example topologies and terminology mapping (e.g., physical super-spine to RIFT top-of-fabric to Auto-EVPN RR/DCI gateway). Analytics content was folded into this section.
    *   **Compliance Table**: A "pics performa" table was added to the appendix to help confirm compliance with the current Auto-EVPN version.
    *   **Hash Function Refinement**: Tony noted plans to refine the hash function in the next release to provide more continuous VLAN assignments (e.g., 1, 2, 3...) for default fabric ID 1 / EBI 1 cases.

*   **Teaser: Flood Reflection for Scaling IGPs:**
    *   A brief overview was given for an upcoming work item, not directly related to Auto-EVPN but leveraging similar automatic variable derivation technology.
    *   **Problem**: Flat single-area IGPs suffer from excessive flooding, state, and convergence issues at scale, despite benefits like Segment Routing (SR) simplicity.
    *   **Solution**: "Flood Reflection" is proposed, based on existing LSR work. It designates flood reflectors and clients, similar to BGP route reflectors, to reduce state, flooding, and SPF computation, significantly improving network scale.
    *   **Automatic Derivation**: The technology applies automatic variable derivation to determine cluster IDs and client/reflector roles.
    *   **Relationship to RIFT**: This work extends the RIFT base specification in a backwards-compatible way through minor schema additions. Auto-EVPN and Auto-Flood Reflection are orthogonal but can be run together or independently. This could enable RIFT as a "day-zero" protocol for network configuration.

## Decisions and Action Items

*   **DECISION**: The KV Registry WGLC will wait for the RIFT Base Specification to complete its IESG review.
*   **ACTION**: Alvaro to complete IESG review of RIFT Base Specification and Applicability Statement by year-end.
*   **ACTION**: Chairs to initiate Working Group Last Call for the YANG draft soon.
*   **ACTION**: Tony to refine the Auto-EVPN hash function for the next release to improve VLAN assignment continuity.

## Next Steps

*   **RIFT Base Specification & Applicability Statement**: Proceed with IESG review.
*   **YANG Draft**: Begin Working Group Last Call.
*   **KV Registry Draft**: Prepare for Working Group Last Call after RIFT Base Specification progresses.
*   **Auto-EVPN Draft**: Further refine with more DCI examples, multi-plane considerations, and operational details. Co-authorship and comments are encouraged.
*   **RIFT Charter**: Re-charter the working group in the next year, following IESG approval of the Base Specification and Applicability Statement.
*   **Flood Reflection**: A draft presenting this technology is expected for IETF 113.